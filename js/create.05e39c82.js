(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["create"],{2959:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.unsavedChanges?i("div",[t._v(" У вас есть несораненные изменения! ")]):t._e(),i("div",{staticClass:"list"},[i("DetailField",{attrs:{"is-name-editable":!1,name:"Имя",value:t.card.name},on:{save:t.saveNameField}}),t._l(t.card.additional,(function(e,n){return i("DetailField",{key:"detailsField"+n,attrs:{name:e.name,value:e.value},on:{save:function(e){return t.saveField(n,e)},delete:function(e){return t.deleteField(n)}}})}))],2),i("div",[i("btn",{on:{click:t.addAdditionalField}},[t._v(" Добавить информацию ")])],1),i("div",[i("btn",{on:{click:t.submit}},[t._v(" Сохранить информацию ")]),i("btn",{on:{click:t.revert}},[t._v(" Отменить изменения ")])],1)])},a=[],s=(i("a434"),i("b0c0"),i("dedc")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Confirm",{attrs:{show:t.showDeleteConfirm},on:{cancel:t.toggleDeleteConfirm,confirm:t.deleteField}}),i("Confirm",{attrs:{show:t.showCancelConfirm},on:{confirm:t.cancelEditing,cancel:t.toggleCancelConfirm}}),i("div",{staticClass:"contact"},[i("div",{staticClass:"contact__key contact__column"},[t.isNameEditable&&t.isEditing?i("input",{directives:[{name:"model",rawName:"v-model",value:t.innerName,expression:"innerName"}],staticClass:"contact__input",attrs:{type:"text"},domProps:{value:t.innerName},on:{input:function(e){e.target.composing||(t.innerName=e.target.value)}}}):i("span",[t._v(t._s(t.name))])]),i("div",{staticClass:"contact__value contact__column"},[t.isEditing?i("input",{directives:[{name:"model",rawName:"v-model",value:t.innerValue,expression:"innerValue"}],staticClass:"contact__input",attrs:{type:"text"},domProps:{value:t.innerValue},on:{input:function(e){e.target.composing||(t.innerValue=e.target.value)}}}):i("span",[t._v(t._s(t.value))])]),i("div",{staticClass:"contact__column"},[t.isEditing&&t.isEdited?i("btn",{attrs:{type:"success"},on:{click:t.saveChanges}},[t._v(" ✔ ")]):t._e(),t.isEditing?t._e():i("btn",{attrs:{type:"primary"},on:{click:t.toggleEditingStatus}},[t._v(" ✎ ")]),t.isNameEditable?i("btn",{attrs:{type:"danger"},on:{click:t.toggleDeleteConfirm}},[t._v(" ✘ ")]):t._e(),t.isEditing?i("btn",{on:{click:t.cancelWithConfirm}},[t._v(" ↺ ")]):t._e()],1)])],1)},c=[],r=i("9420"),l={name:"DetailField",components:{Btn:s["a"],Confirm:r["a"]},props:{isNameEditable:{type:Boolean,default:!0},name:{type:String,default:""},value:{type:String,default:""}},data:function(){return{isEditing:!1,showDeleteConfirm:!1,showCancelConfirm:!1,innerName:"",innerValue:""}},computed:{isEdited:function(){return this.name!==this.innerName||this.value!==this.innerValue}},watch:{name:{immediate:!0,handler:function(t){this.innerName=t}},value:{immediate:!0,handler:function(t){this.innerValue=t}}},methods:{toggleEditingStatus:function(){this.isEditing=!this.isEditing},toggleDeleteConfirm:function(){this.showDeleteConfirm=!this.showDeleteConfirm},toggleCancelConfirm:function(){this.showCancelConfirm=!this.showCancelConfirm},cancelWithConfirm:function(){if(this.isEdited)return this.toggleCancelConfirm();this.cancelEditing()},cancelEditing:function(){this.isEditing=!1,this.showCancelConfirm=!1,this.innerName=this.name,this.innerValue=this.value},saveChanges:function(){this.$emit("save",{name:"".concat(this.innerName),value:"".concat(this.innerValue)}),this.isEditing=!1},deleteField:function(){this.showDeleteConfirm=!1,this.$emit("delete")}}},d=l,u=(i("f672"),i("2877")),m=Object(u["a"])(d,o,c,!1,null,"8e1e345a",null),h=m.exports,f={name:"Details",components:{Btn:s["a"],DetailField:h},props:{contact:{type:Object,default:function(){return{name:""}}}},data:function(){return{card:{name:"",additional:[]},previousState:[]}},computed:{unsavedChanges:function(){return JSON.stringify(this.contact)!==JSON.stringify(this.card)}},created:function(){this.card=JSON.parse(JSON.stringify(this.contact))},methods:{submit:function(){this.$emit("submit",this.card)},deleteField:function(t){this.saveToHistory(),this.card.additional.splice(t,1)},saveField:function(t,e){this.saveToHistory(),this.$set(this.card.additional,t,e)},saveNameField:function(t){this.saveToHistory(),this.card.name=t.value},saveToHistory:function(){this.previousState.push(JSON.stringify(this.card))},addAdditionalField:function(){var t={name:"Наименоватикус",value:"Полетикус"};if(this.saveToHistory(),this.card.additional)return this.card.additional.push(t);this.$set(this.card,"additional",[t])},revert:function(){if(this.previousState.length){var t=this.previousState.pop();this.$set(this,"card",JSON.parse(t))}}}},v=f,p=(i("c0af"),Object(u["a"])(v,n,a,!1,null,"d1ab57b4",null));e["a"]=p.exports},a691e:function(t,e,i){},c0af:function(t,e,i){"use strict";i("d57d")},d57d:function(t,e,i){},d879:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Details",{attrs:{contact:t.defaultCard},on:{submit:t.saveContact}})],1)},a=[],s=i("5530"),o=i("2959"),c=i("2f62"),r={name:"Create",components:{Details:o["a"]},data:function(){return{defaultCard:{name:"Иван Иванов"}}},methods:Object(s["a"])(Object(s["a"])({},Object(c["b"])(["createContact"])),{},{saveContact:function(t){this.createContact(t),this.$router.push("/")}})},l=r,d=i("2877"),u=Object(d["a"])(l,n,a,!1,null,"2830237e",null);e["default"]=u.exports},f672:function(t,e,i){"use strict";i("a691e")}}]);
//# sourceMappingURL=create.05e39c82.js.map